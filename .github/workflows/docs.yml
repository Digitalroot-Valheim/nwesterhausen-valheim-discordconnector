name: "Upload To Azure Blob Storage"
true: 
  push: 
    branches: 
      - main

jobs: 
  upload: 
    runs-on: ubuntu-latest
    steps: 
      - uses: actions/checkout@v2
      # Build
      - uses: actions/setup-node@v2
        with:
          node-version: '14'
      - run: npx @11ty/eleventy --input=docs
      # Upload
      - uses: bacongobbler/azure-blob-storage-upload@v1.2.0
        with: 
          container_name: $web
          extra_args: "--destination-path discordconnector.valheim.nwest.games/"
          sas_token: "${{ secrets.AZURE_SAS_TOKEN }}"
          source_dir: docs/dist
          sync: true

